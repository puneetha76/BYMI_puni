<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MastiLingo - Welcome</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(to right, #fbc2eb, #a6c1ee);
      padding: 30px;
    }

    .container {
      background: white;
      max-width: 800px;
      margin: auto;
      padding: 30px 40px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    h1 {
      text-align: center;
      color: #4b2e83;
    }

    .quiz-group {
      margin: 30px 0;
    }

    label {
      font-weight: 600;
      display: block;
      margin-bottom: 10px;
      color: #333;
    }

    select, textarea {
      width: 100%;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 16px;
    }

    .continue-btn {
      display: block;
      margin: 30px auto;
      padding: 15px 30px;
      background: #0077b6;
      color: white;
      font-size: 18px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: 0.3s;
    }

    .continue-btn:hover {
      background: #023e8a;
    }

    .features-section {
      margin-top: 40px;
    }

    .features-section h2 {
      color: #3a0ca3;
      text-align: center;
      margin-bottom: 20px;
    }

    .features-section ul {
      list-style: none;
      padding-left: 0;
      font-size: 16px;
    }

    .features-section li {
      margin: 10px 0;
      padding-left: 20px;
      position: relative;
    }

    .features-section li::before {
      content: "üßû‚Äç‚ôÇÔ∏è";
      position: absolute;
      left: 0;
    }

    #floating-genie {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 80px;
      height: 80px;
      animation: float 2.2s infinite ease-in-out;
      cursor: pointer;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    /* MCQ Option Pop Effect */
    .mcq-option {
      display: block;
      width: 90%;
      background: #85e3e3;
      border-radius: 12px;
      padding: 12px 18px;
      margin: 12px 0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
      font-weight: 500;
      font-size: 17px;
      transition: transform 0.18s cubic-bezier(.4,2,.6,1), box-shadow 0.18s;
      cursor: pointer;
      border: 2px solid transparent;
      text-align: center;
    }
    .mcq-option:hover, .mcq-option:focus-within {
      transform: scale(1.08);
      box-shadow: 0 6px 18px rgba(0,0,0,0.13);
      border: 2px solid #0077b6;
      background: #618aa5;
    }

    /* Roaming Genie Animation */
    @keyframes roamGenie {
      0%   { left: 10px; top: 10px; }
      20%  { left: 80%; top: 10px; }
      40%  { left: 80%; top: 70%; }
      60%  { left: 10px; top: 70%; }
      80%  { left: 40%; top: 30%; }
      100% { left: 10px; top: 10px; }
    }
  </style>
</head>
<body>

  <div class="container">
    <div id="genie-intro" style="text-align:center;">
      <img src="images/genie.png" alt="Genie" style="width:190px; height:190px; margin-bottom:10px; animation: float 2.2s infinite ease-in-out; cursor:pointer;">
      <h1 style="margin-top:0; color:#4b2e83;">Welcome to MastiLingo! üßû‚Äç‚ôÇÔ∏è</h1>
      <button class="continue-btn" style="margin-top:20px;" onclick="showQuizForm()">Get Started</button>
    </div>
    <div id="quiz-form" style="display:none;">
      <!-- Roaming Genie -->
      <img id="roaming-genie" src="images/genie.png" alt="Genie" style="position:fixed; left:30px; bottom:30px; width:130px; height:130px; pointer-events:none; z-index:100;">
      <form id="mcq-form" onsubmit="return false;" >
        <div id="mcq-step-1" class="quiz-group">
          <label>Which language do you want to learn?</label>
          <div>
            <label class="mcq-option"><input type="radio" name="language" value="Hindi"> Hindi</label>
            <label class="mcq-option"><input type="radio" name="language" value="Kannada"> Kannada</label>
            <label class="mcq-option"><input type="radio" name="language" value="Telugu"> Telugu</label>
            <label class="mcq-option"><input type="radio" name="language" value="Tamil"> Tamil</label>
            <label class="mcq-option"><input type="radio" name="language" value="Malayalam"> Malayalam</label>
          </div>
          <button class="continue-btn" type="button" onclick="nextMCQ(1)">Next</button>
        </div>
        <div id="mcq-step-2" class="quiz-group" style="display:none;">
          <label>Why do you want to learn this language?</label>
          <div>
            <label class="mcq-option"><input type="radio" name="reason" value="For job or study"> For job or study</label>
            <label class="mcq-option"><input type="radio" name="reason" value="To travel"> To travel</label>
            <label class="mcq-option"><input type="radio" name="reason" value="To talk with friends or family"> To talk with friends or family</label>
            <label class="mcq-option"><input type="radio" name="reason" value="I love the culture"> I love the culture</label>
            <label class="mcq-option"><input type="radio" name="reason" value="Just for fun!"> Just for fun!</label>
          </div>
          <button class="continue-btn" type="button" onclick="nextMCQ(2)">Next</button>
          <button class="continue-btn" type="button" onclick="prevMCQ(2)" style="margin-top:10px;">Back</button>
        </div>
        <div id="mcq-step-3" class="quiz-group" style="display:none;">
          <label>How did you hear about MastiLingo?</label>
          <div>
            <label class="mcq-option"><input type="radio" name="heard" value="Friend"> Friend</label>
            <label class="mcq-option"><input type="radio" name="heard" value="YouTube"> YouTube</label>
            <label class="mcq-option"><input type="radio" name="heard" value="Instagram"> Instagram</label>
            <label class="mcq-option"><input type="radio" name="heard" value="Other"> Other</label>
            <input type="text" id="heard-other" name="heard-other" placeholder="Please specify..." style="display:none; margin-top:8px; width:90%;">
          </div>
          <button class="continue-btn" type="button" onclick="submitMCQ()">Let‚Äôs Start Learning!</button>
          <button class="continue-btn" type="button" onclick="prevMCQ(3)" style="margin-top:10px;">Back</button>
        </div>
      </form>
      <div class="features-section">
        <h2>Why You'll Love MastiLingo üíô</h2>
        <ul>
          <li>Fun Genie-powered lessons</li>
          <li>Real-time pronunciation with text-to-speech</li>
          <li>Personalized language path</li>
          <li>Earn Jadoo Coins and unlock rewards</li>
          <li>Compete with your friends</li>
          <li>Learn with fun quizzes, stories and culture</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Floating Genie Assistant (hidden for now, can be re-enabled if needed) -->
  <!-- <div id="floating-genie" onclick="genieSpeak()">
    <img src="images/genie.png.png" alt="Genie" style="width:100%; height:100%;">
  </div> -->

  <!-- Optional voice -->
  <audio id="genieSound" src="sounds/genie-hello.mp3" preload="auto"></audio>

  <script>
    function genieSpeak() {
      document.getElementById("genieSound").play();
      alert("üßû‚Äç‚ôÇÔ∏è Need help choosing a language? I got you!");
    }

    function showQuizForm() {
      document.getElementById("genie-intro").style.display = "none";
      document.getElementById("quiz-form").style.display = "block";
      showMCQStep(1);
    }

    function showMCQStep(step) {
      for (let i = 1; i <= 3; i++) {
        document.getElementById(`mcq-step-${i}`).style.display = (i === step) ? "block" : "none";
      }
    }

    function nextMCQ(current) {
      if (current === 1) {
        const lang = document.querySelector('input[name="language"]:checked');
        if (!lang) {
          alert("Please select a language üßû‚Äç‚ôÇÔ∏è");
          return;
        }
        showMCQStep(2);
      } else if (current === 2) {
        const reason = document.querySelector('input[name="reason"]:checked');
        if (!reason) {
          alert("Please select a reason üßû‚Äç‚ôÇÔ∏è");
          return;
        }
        showMCQStep(3);
      }
    }

    function prevMCQ(current) {
      showMCQStep(current - 1);
    }

    // Show/hide 'Other' text input for heard
    document.addEventListener('DOMContentLoaded', function() {
      const heardRadios = document.getElementsByName('heard');
      for (let radio of heardRadios) {
        radio.addEventListener('change', function() {
          const otherInput = document.getElementById('heard-other');
          if (this.value === 'Other') {
            otherInput.style.display = 'inline-block';
            otherInput.focus();
          } else {
            otherInput.style.display = 'none';
            otherInput.value = '';
          }
        });
      }
    });

    function submitMCQ() {
      const lang = document.querySelector('input[name="language"]:checked');
      const reason = document.querySelector('input[name="reason"]:checked');
      const heard = document.querySelector('input[name="heard"]:checked');
      let heardValue = heard ? heard.value : '';
      if (heardValue === 'Other') {
        heardValue = document.getElementById('heard-other').value.trim();
      }
      if (!lang || !reason || !heard || !heardValue) {
        alert("Please answer all questions üßû‚Äç‚ôÇÔ∏è");
        return;
      }
      // Hide quiz and show result screen
      document.getElementById('quiz-form').style.display = 'none';
      showResultScreen(lang.value, reason.value, heardValue);
    }

    function showResultScreen(language, reason, heard) {
      // Remove any previous result screen
      let oldResult = document.getElementById('result-screen');
      if (oldResult) oldResult.remove();
      // Create result screen
      const resultDiv = document.createElement('div');
      resultDiv.id = 'result-screen';
      resultDiv.style.position = 'fixed';
      resultDiv.style.top = '0';
      resultDiv.style.left = '0';
      resultDiv.style.width = '100vw';
      resultDiv.style.height = '100vh';
      resultDiv.style.background = 'linear-gradient(to right, #fbc2eb, #a6c1ee)';
      resultDiv.style.display = 'flex';
      resultDiv.style.flexDirection = 'column';
      resultDiv.style.justifyContent = 'center';
      resultDiv.style.alignItems = 'center';
      resultDiv.style.zIndex = '9999';
      resultDiv.innerHTML = `
        <div style="background:linear-gradient(to right, #fbc2eb, #a6c1ee);padding:40px 36px 32px 36px;border-radius:22px;box-shadow:0 8px 32px rgba(0,0,0,0.13);max-width:400px;text-align:center;position:relative;">
          <img src='images/genie.png' alt='Genie' style='width:110px;height:110px;position:absolute;left:50%;top:-60px;transform:translateX(-50%);filter:drop-shadow(0 6px 18px #a6c1ee);'>
          <h2 style="color:#4b2e83;margin-top:60px;">Genie says...</h2>
          <p style="font-size:18px;margin:18px 0 0 0;">You chose to learn <b>${language}</b>!</p>
          <p style="font-size:16px;margin:10px 0 0 0;">Reason: <b>${reason}</b></p>
          <p style="font-size:16px;margin:10px 0 18px 0;">Heard about us from: <b>${heard}</b></p>
          <p style="font-size:15px;color:#0077b6;margin-top:22px;">Taking you to your dashboard...</p>
        </div>
      `;
      document.body.appendChild(resultDiv);
      setTimeout(goToDashboard, 3000);
    }

    function goToDashboard() {
      window.location.href = "dashboard.html";
    }
  </script>
</body>
</html>
