<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Shopping Cart</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; text-align: center; margin-top: 50px; }
    </style>
</head>
<body>
    <h1>ðŸ›’ Your Shopping Cart</h1>
    <div id="cart-items">
        <p>Items you've added to your cart will appear here.</p>
    </div>
    <form id="payment-form" style="margin:30px auto;max-width:350px;text-align:left;background:#f9f9f9;padding:20px 30px;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,0.07);">
        <h2 style="text-align:center;font-size:1.3em;margin-bottom:18px;">Payment Method</h2>
        <label><input type="radio" name="payment" value="card" checked> Credit/Debit Card</label><br>
        <div id="card-fields" style="margin:10px 0 10px 20px;">
            <input type="text" id="cardNumber" maxlength="19" placeholder="Card Number" style="width:95%;margin-bottom:7px;padding:7px;border-radius:5px;border:1px solid #ccc;">
            <input type="text" id="cardName" placeholder="Name on Card" style="width:95%;margin-bottom:7px;padding:7px;border-radius:5px;border:1px solid #ccc;">
            <input type="text" id="cardExpiry" maxlength="5" placeholder="MM/YY" style="width:45%;margin-right:5%;padding:7px;border-radius:5px;border:1px solid #ccc;">
            <input type="text" id="cardCVV" maxlength="4" placeholder="CVV" style="width:45%;padding:7px;border-radius:5px;border:1px solid #ccc;">
        </div>
        <label><input type="radio" name="payment" value="upi"> UPI</label><br>
        <div id="upi-fields" style="margin:10px 0 10px 20px;display:none;">
            <input type="text" id="upiId" placeholder="yourname@bank" style="width:95%;padding:7px;border-radius:5px;border:1px solid #ccc;">
        </div>
        <label><input type="radio" name="payment" value="cod"> Cash on Delivery</label><br>
        <button type="button" id="payNowBtn" style="margin-top:18px;width:100%;background:#00bcd4;color:white;padding:10px 0;font-size:1.1em;border:none;border-radius:7px;cursor:pointer;">Pay Now</button>
        <div id="payment-message" style="margin-top:15px;color:#28a745;font-weight:bold;text-align:center;"></div>
    </form>
    <p><a href="products.html">Continue Shopping</a></p>
    <script>
        // Get cart items from localStorage
        const cartItems = JSON.parse(localStorage.getItem('cart')) || [];
        const cartDiv = document.getElementById('cart-items');
        if (cartItems.length === 0) {
            cartDiv.innerHTML = '<p>Your cart is empty.</p>';
        } else {
            let html = '<ul style="list-style:none;padding:0;">';
            cartItems.forEach((item, idx) => {
                html += `<li style="margin-bottom:15px;">`;
                html += `<strong>${item.name}</strong><br>`;
                if(item.image) html += `<img src="${item.image}" alt="${item.name}" style="max-width:100px;"><br>`;
                if(item.price) html += `Price: â‚¹${item.price}<br>`;
                html += `<button onclick="removeFromCart(${idx})" style='margin-top:8px;background:#e74c3c;color:white;border:none;padding:6px 14px;border-radius:5px;cursor:pointer;'>Remove</button>`;
                html += `</li>`;
            });
            html += '</ul>';
            cartDiv.innerHTML = html;
        }

        function removeFromCart(index) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            cart.splice(index, 1);
            localStorage.setItem('cart', JSON.stringify(cart));
            location.reload();
        }
        // Payment method UI logic
        const cardFields = document.getElementById('card-fields');
        const upiFields = document.getElementById('upi-fields');
        document.querySelectorAll('input[name="payment"]').forEach(radio => {
            radio.addEventListener('change', function() {
                if(this.value === 'card') {
                    cardFields.style.display = '';
                    upiFields.style.display = 'none';
                } else if(this.value === 'upi') {
                    cardFields.style.display = 'none';
                    upiFields.style.display = '';
                } else {
                    cardFields.style.display = 'none';
                    upiFields.style.display = 'none';
                }
            });
        });

        document.getElementById('payNowBtn').onclick = function() {
            const selected = document.querySelector('input[name="payment"]:checked').value;
            let msg = '';
            if(selected === 'card') {
                // Validate card fields
                const num = document.getElementById('cardNumber').value.trim();
                const name = document.getElementById('cardName').value.trim();
                const exp = document.getElementById('cardExpiry').value.trim();
                const cvv = document.getElementById('cardCVV').value.trim();
                if(!/^\d{16,19}$/.test(num.replace(/\s/g,''))) {
                    msg = 'Enter a valid card number.';
                } else if(!name) {
                    msg = 'Enter name on card.';
                } else if(!/^\d{2}\/\d{2}$/.test(exp)) {
                    msg = 'Enter expiry as MM/YY.';
                } else if(!/^\d{3,4}$/.test(cvv)) {
                    msg = 'Enter valid CVV.';
                } else {
                    msg = 'Payment successful! (Card)';
                    localStorage.removeItem('cart');
                    setTimeout(()=>{ window.location.href = 'home.html'; }, 2000);
                }
            } else if(selected === 'upi') {
                const upi = document.getElementById('upiId').value.trim();
                if(!/^\w+@[\w.]+$/.test(upi)) {
                    msg = 'Enter a valid UPI ID.';
                } else {
                    msg = 'Payment successful! (UPI)';
                    localStorage.removeItem('cart');
                    setTimeout(()=>{ window.location.href = 'home.html'; }, 2000);
                }
            } else {
                msg = 'Order placed! Pay on delivery.';
                localStorage.removeItem('cart');
                setTimeout(()=>{ window.location.href = 'home.html'; }, 2000);
            }
            document.getElementById('payment-message').style.color = msg.includes('successful') || msg.includes('Order placed') ? '#28a745' : '#e74c3c';
            document.getElementById('payment-message').textContent = msg;
        };
    </script>
</body>
</html>